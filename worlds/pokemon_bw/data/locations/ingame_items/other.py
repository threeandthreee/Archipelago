from ..rules import *
from ..progress_type import *
from ... import FlagLocationData

# How I decided the progress types:
# I set always_default by default (pun not intended)
# If the npc/... gives you a progression key item, it will be key_item_location
# If accessibility is not always given, it will be always_excluded

table: dict[str, FlagLocationData] = {
    "Nuvema Town - Item from Mom after first fight": FlagLocationData(0x189, always_default, "Nuvema Town", None, None),
    # Following is broken due to script issues, item can be set to 0x80 but no flag
    "Nuvema Town - Item #2 from Mom": FlagLocationData(0x185, always_default, "Nuvema Town", disabled, None),
    # Vanilla location of Super Rod
    "Nuvema Town - Item from Looker after beating Ghetsis": FlagLocationData(0x18A, key_item_location, "Nuvema Town", None, can_beat_ghetsis),
    "Route 1 - Item after catching tutorial #1": FlagLocationData(0x18B, always_default, "Route 1 East", None, None),
    "Route 1 - Item after catching tutorial #2": FlagLocationData(0x18B, always_default, "Route 1 East", None, None),
    "Route 1 - Item after catching tutorial #3": FlagLocationData(0x18B, always_default, "Route 1 East", None, None),
    "Route 1 - Item after catching tutorial #4": FlagLocationData(0x18B, always_default, "Route 1 East", None, None),
    "Route 1 - Item after catching tutorial #5": FlagLocationData(0x18B, always_default, "Route 1 East", None, None),
    "Route 1 - Item from woman": FlagLocationData(132, always_default, "Route 1 East", None, None),
    "Route 1 - Item from ranger Brenda": FlagLocationData(1420+531, always_default, "Route 1 West", None, None),
    "Route 1 - Item from ranger Claude": FlagLocationData(1420+532, always_default, "Route 1 West", None, None),
    # Requires pokémon being randomized
    # "P2 Laboratory - Item from scientist #1": FlagLocationData(0000000, always_default, "P2 Laboratory", None, has_species("Genesect")), TODO
    # "P2 Laboratory - Item from scientist #2": FlagLocationData(0000000, always_default, "P2 Laboratory", None, has_species("Genesect")), TODO
    "Accumula Town - Item from man in north west building": FlagLocationData(109, always_default, "Accumula Town", None, None),
    "Striaton City - Item from man in south east building": FlagLocationData(111, always_default, "Striaton City", None, None),
    "Striaton City - Item from roughneck": FlagLocationData(189, always_default, "Striaton City", None, None),
    "Striaton City - Item from Cheren #1": FlagLocationData(192, always_default, "Striaton City", None, None),
    "Striaton City - Item from Cheren #2": FlagLocationData(192, always_default, "Striaton City", None, None),
    "Striaton City - Item from Cheren #3": FlagLocationData(192, always_default, "Striaton City", None, None),
    "Striaton City - Item from boy in Trainer's School": FlagLocationData(190, always_default, "Striaton City", None, None),
    "Striaton City - Item from Amanita": FlagLocationData(0x18C, always_default, "Striaton City", None, can_cut_dreamyard_tree),
    "Striaton City - Item from fisherman": FlagLocationData(187, always_default, "Striaton City", None, can_use_surf),
    "Striaton Gym - Gym guide item": FlagLocationData(118, always_default, "Striaton City", None, None),
    "Route 3 - Item from pokémon breeder Adelaide": FlagLocationData(1420+20, always_default, "Route 3", None, None),
    "Route 3 - Item from girl after Wellspring Cave #1": FlagLocationData(0x18E, always_default, "Route 3", None, None),
    "Route 3 - Item from girl after Wellspring Cave #2": FlagLocationData(0x18E, always_default, "Route 3", None, None),
    "Route 3 - Item from girl after Wellspring Cave #3": FlagLocationData(0x18E, always_default, "Route 3", None, None),
    "Route 3 - Item from pokémon breeder Galen": FlagLocationData(1420+19, always_default, "Route 3", None, can_use_surf),
    "Nacrene City - Item from Cheren #1": FlagLocationData(0x194, always_default, "Nacrene City", None, None),
    "Nacrene City - Item from Cheren #2": FlagLocationData(0x194, always_default, "Nacrene City", None, None),
    "Nacrene City - Item from Cheren #3": FlagLocationData(0x194, always_default, "Nacrene City", None, None),
    "Nacrene City - Item from girl in west building": FlagLocationData(301, always_default, "Nacrene City", None, None),
    "Nacrene City - Item from waitress in Café Warehouse": FlagLocationData(0x1B7, always_default, "Nacrene City", None, None),
    "Nacrene City - Item from Bianca": FlagLocationData(0x18F, always_default, "Nacrene City", None, None),
    # Vanilla location of Light/Dark Stone
    "Nacrene City - Item from Lenora after Relic Castle": FlagLocationData(0x195, key_item_location, "Nacrene City", None, can_go_deeper_into_relic_castle),
    "Nacrene Gym - Gym guide item": FlagLocationData(119, always_default, "Nacrene City", None, None),
    "Pinwheel Forest Outside - Item from challenge rock": FlagLocationData(0x1B8, always_default, "Pinwheel Forest Outside", None, has_fighting_type_species),
    "Pinwheel Forest - Item from ranger Forrest": FlagLocationData(1420+26, always_default, "Pinwheel Forest West", None, None),
    "Pinwheel Forest - Item from ranger Audra": FlagLocationData(1420+29, always_default, "Pinwheel Forest West", None, None),
    "Pinwheel Forest - Item from ranger Irene": FlagLocationData(1420+27, always_default, "Pinwheel Forest West", None, None),
    "Pinwheel Forest - Item from ranger Miguel": FlagLocationData(1420+28, always_default, "Pinwheel Forest West", None, None),
    # Vanilla location of Dragon Skull
    "Pinwheel Forest - Stolen item from Plasma grunt": FlagLocationData(0x187, key_item_location, "Pinwheel Forest West", None, None),
    "Pinwheel Forest - Item from Lenora": FlagLocationData(0x188, always_default, "Pinwheel Forest West", None, None),
    "Skyarrow Bridge - Item from hiker in gate": FlagLocationData(268, always_default, "Skyarrow Bridge", None, None),
    "Castelia City - Item from scientist at Thumb Pier": FlagLocationData(269, always_default, "Castelia City", None, None),
    # The following locations involve trading and I don't know yet how to handle them
    # Not changing the script
    # "Castelia City Pokémon Center - Item by man in black for 5 different IDs": FlagLocationData(0000000, always_excluded, "Castelia City", None, AAAAAA),
    # "Castelia City Pokémon Center - Item by man in black for 10 different IDs": FlagLocationData(0000000, always_excluded, "Castelia City", None, AAAAAA),
    # "Castelia City Pokémon Center - Item by man in black for 20 different IDs": FlagLocationData(0000000, always_excluded, "Castelia City", None, AAAAAA),
    # "Castelia City Pokémon Center - Item by man in black for 30 different IDs": FlagLocationData(0000000, always_excluded, "Castelia City", None, AAAAAA),
    # "Castelia City Pokémon Center - Item by man in black for 40 different IDs": FlagLocationData(0000000, always_excluded, "Castelia City", None, AAAAAA),
    # "Castelia City Pokémon Center - Item by man in black for 50 different IDs": FlagLocationData(0000000, always_excluded, "Castelia City", None, AAAAAA),
    "Battle Company - 47F item from clerk #1": FlagLocationData(266, always_default, "Castelia City", None, None),
    "Battle Company - 47F item from clerk #2": FlagLocationData(266, always_default, "Castelia City", None, None),
    "Battle Company - 47F item from clerk #3": FlagLocationData(266, always_default, "Castelia City", None, None),
    "Battle Company - 47F item from clerk #4": FlagLocationData(266, always_default, "Castelia City", None, None),
    "Battle Company - 47F item from clerk #5": FlagLocationData(266, always_default, "Castelia City", None, None),
    "Battle Company - 47F item from clerk #6": FlagLocationData(266, always_default, "Castelia City", None, None),
    "Battle Company - 47F item from scientist": FlagLocationData(191, always_default, "Castelia City", None, None),
    "Battle Company - 55F item from President Geoff": FlagLocationData(163, always_default, "Castelia City", None, None),
    # Asks for random pokémon type
    "Castelia City - Item from harlequin in Studio Castelia": FlagLocationData(0x1BA, always_excluded, "Castelia City", disabled, None),
    "Castelia City - Item from manager in Café Sonata": FlagLocationData(164, always_default, "Castelia City", None, None),
    "Castelia City - Item from Iris in Plasma hideout": FlagLocationData(0x199, always_default, "Castelia City", None, None),
    "Castelia City - Item from dancers": FlagLocationData(0x196, always_default, "Castelia City", None, None),
    "Castelia City - Item from scientist in building in northern street": FlagLocationData(328, always_default, "Castelia City", None, has_25_species),
    # The rom editor cannot decompile the script for the Passerby Analytics HQ properly
    # "Passerby Analytics HQ - Item for answering all questionnaires": FlagLocationData(0000000, always_default, "Castelia City", None, None),
    # I think this one requires connecting with other save files too
    # Not changing the script
    # "Passerby Analytics HQ - Item for completing all survey requests": FlagLocationData(0000000, always_default, "Castelia City", None, None),
    "Castelia Gym - Gym guide item": FlagLocationData(120, always_default, "Castelia City", None, None),
    # Royal Unova only accessible at season-dependant day times
    "Royal Unova - Item for defeating every trainer": FlagLocationData(0x198, always_excluded, "Castelia City", disabled, can_beat_ghetsis),
    "Route 4 - Item from Professor Juniper #1": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Route 4 - Item from Professor Juniper #2": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Route 4 - Item from Professor Juniper #3": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Route 4 - Item from Professor Juniper #4": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Route 4 - Item from Professor Juniper #5": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Route 4 - Item from Professor Juniper #6": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Route 4 - Item from Professor Juniper #7": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Route 4 - Item from Professor Juniper #8": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Route 4 - Item from Professor Juniper #9": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Route 4 - Item from Professor Juniper #10": FlagLocationData(0x19B, always_default, "Route 4 North", None, None),
    "Desert Resort - Item from man in black": FlagLocationData(276, always_default, "Desert Resort", None, None),
    "Desert Resort - Item from ranger Mylene": FlagLocationData(1420+549, always_default, "Desert Resort", None, None),
    "Desert Resort - Item from ranger Jaden": FlagLocationData(1420+550, always_default, "Desert Resort", None, None),
    "Desert Resort - Item from Professor Juniper": FlagLocationData(0x19C, always_default, "Desert Resort", None, can_beat_ghetsis),
    "Relic Castle - 1F castleside item from backpacker": FlagLocationData(145, always_default, "Relic Castle Entrance", None, None),
    "Nimbasa City - Item from Day-Care man": FlagLocationData(153, always_default, "Nimbasa City", None, None),
    "Nimbasa City - Item from socialite in western building": FlagLocationData(366, always_default, "Nimbasa City", None, None),
    "Nimbasa City - Item from ace trainer exiting battle subway": FlagLocationData(0x19E, always_default, "Nimbasa City", None, None),
    "Nimbasa City - Item from ace trainer in another western building": FlagLocationData(273, always_default, "Nimbasa City", None, None),
    "Nimbasa City - Item from man in eastern gate": FlagLocationData(367, always_default, "Nimbasa City", None, None),
    "Nimbasa Gym - Gym guide item": FlagLocationData(121, always_default, "Nimbasa City", None, None),
    # Following trainers are said to appear randomly each day in big stadium or small court
    "Nimbasa City - Item from waiter Clint": FlagLocationData(1420+363, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from waitress Bonita": FlagLocationData(1420+364, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from nurse Kirsten": FlagLocationData(1420+385, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from doctor Jules": FlagLocationData(1420+384, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from baker Lilly": FlagLocationData(1420+377, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from scientist Simon": FlagLocationData(1420+365, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from scientist Blythe": FlagLocationData(1420+366, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from ace trainer Lucille": FlagLocationData(1420+357, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from ace trainer Charlie": FlagLocationData(1420+358, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from veteran Arlen": FlagLocationData(1420+359, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from veteran Sayuri": FlagLocationData(1420+360, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from nursery aide Leah": FlagLocationData(1420+378, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from youngster Kevin": FlagLocationData(1420+147, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from lass Dana": FlagLocationData(1420+354, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from backpacker Alexander": FlagLocationData(1420+383, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from backpacker Patty": FlagLocationData(1420+382, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from socialite Emilia": FlagLocationData(1420+369, always_excluded, "Nimbasa City", disabled, None),
    "Nimbasa City - Item from gentleman Renaud": FlagLocationData(1420+370, always_excluded, "Nimbasa City", disabled, None),
    # Following items require such an amount of effort that having important items here might be a problem
    # Also, the script doesn't decompile properly
    # "Battle Subway - Item from janitor on non-super platforms for 21 consecutive wins": FlagLocationData(0000000, always_excluded, "Nimbasa City", None, None),
    # "Battle Subway - Item from artist on super platforms for 21 consecutive wins": FlagLocationData(0000000, always_excluded, "Nimbasa City", None, None),
    # "Battle Subway - Item from ace trainer on super platforms for 28 consecutive wins": FlagLocationData(0000000, always_excluded, "Nimbasa City", None, None),
    # "Battle Subway - Item from clerk on super platforms for 105 consecutive wins": FlagLocationData(0000000, always_excluded, "Nimbasa City", None, None),
    # "Battle Subway - Item from ace trainer on super platforms for 203 consecutive wins": FlagLocationData(0000000, always_excluded, "Nimbasa City", None, None),
    "Nimbasa City - Item from Musical Theater owner": FlagLocationData(0x19F, always_default, "Nimbasa City", None, None),
    "Anville Town - Item from depot agent on first visit": FlagLocationData(323, always_default, "Anville Town", None, None),
    "Driftveil City - Item from man for seeing more than 50 pokémon": FlagLocationData(264, always_default, "Driftveil City", None, has_51_species),
    "Driftveil City - Item from girl in pokémon center #1": FlagLocationData(147, always_default, "Driftveil City", None, None),
    "Driftveil City - Item from girl in pokémon center #2": FlagLocationData(147, always_default, "Driftveil City", None, None),
    "Driftveil City - Item from girl in pokémon center #3": FlagLocationData(147, always_default, "Driftveil City", None, None),
    "Driftveil City - Item from man in black in market": FlagLocationData(365, always_default, "Driftveil City", None, None),
    # That lady is asking for a random TM move every day
    "Driftveil City - Item from lady asking for a pokémon knowing a certain TM move": FlagLocationData(0x1BC, always_excluded, "Driftveil City", disabled, has_any_tm_hm),
    "Driftveil Gym - Gym guide item": FlagLocationData(122, always_default, "Driftveil City", None, None),
    "Cold Storage - Item from worker": FlagLocationData(316, always_default, "Cold Storage", None, None),
    "Route 6 - Item from ranger Shanti": FlagLocationData(1420+186, always_default, "Route 6", None, None),
    "Route 6 - Item from ranger Richard": FlagLocationData(1420+182, always_default, "Route 6", None, None),
    "Route 6 - Item from scientist for all Deerling forms": FlagLocationData(350, season_dependant, "Route 6", None, can_catch_all_deerlings),
    "Route 6 - Item from child in western house": FlagLocationData(261, always_default, "Route 6", None, None),
    "Chargestone Cave - Item from Professor Juniper": FlagLocationData(0x1A3, always_default, "Chargestone Cave", None, None),
    "Chargestone Cave - Item from nugget brothers #1": FlagLocationData(169, always_default, "Chargestone Cave", None, None),
    "Chargestone Cave - Item from nugget brothers #2": FlagLocationData(169, always_default, "Chargestone Cave", None, None),
    "Mistralton City - Item from veteran in Cargo Service building": FlagLocationData(144, always_default, "Mistralton City", None, None),
    "Mistralton Gym - Gym guide item": FlagLocationData(123, always_default, "Mistralton City", None, None),
    "Route 7 - Item from ranger Mary": FlagLocationData(1420+187, always_default, "Route 7", None, None),
    "Route 7 - Item from ranger Pedro": FlagLocationData(1420+183, always_default, "Route 7", None, None),
    "Twist Mountain - Item from worker near ice rock cave": FlagLocationData(0x1BF, always_default, "Twist Mountain", None, can_beat_ghetsis),
    "Icirrus City - Item from Aha if answer was correct": FlagLocationData(0x1A6, always_default, "Icirrus City", None, None),
    "Icirrus City - Item from Aha if answer was incorrect": FlagLocationData(0x1A7, always_default, "Icirrus City", None, None),
    "Icirrus City - Item from Pokémon Fan Club chairman for gaining 25 levels": FlagLocationData(251, always_default, "Icirrus City", None, None),
    "Icirrus City - Item from Pokémon Fan Club chairman for gaining 50 levels": FlagLocationData(252, always_default, "Icirrus City", None, None),
    # This is not only unreasonable, but also has an astronomically low softlock chance if we don't document breeding data and consider it during generation
    "Icirrus City - Item from Pokémon Fan Club chairman for gaining 99 levels": FlagLocationData(253, always_excluded, "Icirrus City", disabled, None),
    "Icirrus City - Item from the former Team Rocket member's wife (Winter)": FlagLocationData(134, season_dependant, "Icirrus City", None, can_set_winter),
    "Icirrus Gym - Gym guide item": FlagLocationData(124, always_default, "Icirrus City", None, None),
    "Dragonspiral Tower - Item from Cedric Juniper": FlagLocationData(310, always_default, "Dragonspiral Tower", None, None),
    "Route 8 - Item from Bianca": FlagLocationData(0x1A8, always_default, "Route 8", None, can_go_deeper_into_relic_castle),
    "Route 8 - Item from ranger Lewis": FlagLocationData(1420+184, always_default, "Route 8", None, None),
    "Route 8 - Item from ranger Annie": FlagLocationData(1420+188, always_default, "Route 8", None, None),
    "Route 8 - Item from eastern parasol lady": FlagLocationData(0x1C2, always_default, "Route 8", None, None),
    "Moor of Icirrus - Item from ranger Chloris": FlagLocationData(1420+582, always_default, "Moor of Icirrus", None, None),
    "Moor of Icirrus - Item from ranger Harry": FlagLocationData(1420+583, always_default, "Moor of Icirrus", None, None),
    "Shopping Mall Nine - Item from worker": FlagLocationData(262, always_default, "Route 9", None, None),
    "Marvelous Bridge - Item from Shadow Triad #1": FlagLocationData(0x1AA, always_default, "Marvelous Bridge", None, None),
    "Marvelous Bridge - Item from Shadow Triad #2": FlagLocationData(0x1AB, always_default, "Marvelous Bridge", None, None),
    "Marvelous Bridge - Item from Shadow Triad #3": FlagLocationData(0x1AC, always_default, "Marvelous Bridge", None, None),
    "Marvelous Bridge - Patrat shuffle reward": FlagLocationData(0x1C4, always_default, "Marvelous Bridge", None, can_find_woman_on_village_bridge),
    "Route 15 - Item from ranger Shelly": FlagLocationData(1420+454, always_default, "Route 15", None, None),
    "Route 15 - Item from ranger Keith": FlagLocationData(1420+456, always_default, "Route 15", None, None),
    "Undella Town - Item from man in Pokémon Center": FlagLocationData(359, always_default, "Undella Town", None, None),
    "Route 13 - Item from veteran in western house #1": FlagLocationData(356, always_default, "Route 13", None, can_use_surf),
    "Route 13 - Item from veteran in western house #2": FlagLocationData(356, always_default, "Route 13", None, can_use_surf),
    # The following 2 locations normally have wingull grams, which are progressive key items
    "Route 13 - Item from old man": FlagLocationData(318, key_item_location, "Route 13", None, None),
    "Route 13 - Item from parasol lady": FlagLocationData(319, key_item_location, "Route 13", None, None),
    "Route 13 - Random item from man in black": FlagLocationData(279, always_default, "Route 13", None, None),
    "Lacunosa Town - Item from executive": FlagLocationData(0x1CA, always_default, "Lacunosa Town", None, None),
    # Requires pokémon being randomized
    # "Lacunosa Town - Item from girl for showing a Shaymin": FlagLocationData(0000000, always_default, "Lacunosa Town", None, has_species("Shaymin")), TODO
    "Route 12 - Item from breeder Ethel": FlagLocationData(1420+452, always_default, "Route 12", None, None),
    "Route 12 - Item from breeder Eustace": FlagLocationData(1420+451, always_default, "Route 12", None, None),
    "Village Bridge - Item from baker Chris": FlagLocationData(0x1AF, always_default, "Village Bridge", None, None),
    # Following 5 items require a random pokémon every day
    "Village Bridge - Item from fisherman for showing a certain pokémon #1": FlagLocationData(0x1B0, always_excluded, "Village Bridge", disabled, None),
    "Village Bridge - Item from fisherman for showing a certain pokémon #2": FlagLocationData(0x1B0, always_excluded, "Village Bridge", disabled, None),
    "Village Bridge - Item from fisherman for showing a certain pokémon #3": FlagLocationData(0x1B0, always_excluded, "Village Bridge", disabled, None),
    "Village Bridge - Item from fisherman for showing a certain pokémon #4": FlagLocationData(0x1B0, always_excluded, "Village Bridge", disabled, None),
    "Village Bridge - Item from fisherman for showing a certain pokémon #5": FlagLocationData(0x1B0, always_excluded, "Village Bridge", disabled, None),
    "Route 11 - Item from ranger Thalia": FlagLocationData(1420+453, always_default, "Route 11", None, None),
    "Route 11 - Item from ranger Crofton": FlagLocationData(1420+455, always_default, "Route 11", None, can_use_waterfall),
    "Opelucid City - Item from female NPC in northern house": FlagLocationData(312, always_default, "Opelucid City", None, None),
    "Opelucid City - Item from linebacker in Drayden's house": FlagLocationData(324, always_default, "Opelucid City", None, None),
    "Opelucid City - Item from female NPC in Drayden's house": FlagLocationData(325, always_default, "Opelucid City", None, None),
    "Opelucid Gym - Gym guide item": FlagLocationData(125, always_default, "Opelucid City", None, None),
    # Don't know how to handle pokémon from other version
    # Not changing the script
    # "Opelucid City - Item from NPC for showing a pokémon knowing Charge from opposite version": FlagLocationData(0000000, always_default, "Opelucid City", None, None),
    "Opelucid City - Item from Professor Juniper": FlagLocationData(0x1B1, always_default, "Opelucid City", None, None),
    "Route 10 - Item from veteran near northern bridge": FlagLocationData(263, always_default, "Route 10", None, None),
    "Route 10 - Item from Bianka #1": FlagLocationData(0x1B2, always_default, "Route 10", None, None),
    "Route 10 - Item from Bianka #2": FlagLocationData(0x1B2, always_default, "Route 10", None, None),
    "N's Castle - Item from grunt in 3F left room": FlagLocationData(362, always_default, "N's Castle", None, None),
}
